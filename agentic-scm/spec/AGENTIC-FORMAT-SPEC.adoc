// SPDX-License-Identifier: MPL-2.0-or-later
// SPDX-FileCopyrightText: 2025 Jonathan D.A. Jewell
= AGENTIC Format Specification
:doctype: book
:toc: left
:toclevels: 4
:sectnums:
:source-highlighter: highlight.js
:icons: font

[.text-center]
*Internet-Draft Style Specification* +
*Version 0.1.0* +
*January 2026*

[NOTE]
====
Formal grammar: link:agentic.abnf[ABNF Grammar] +
JSON representation: link:agentic.schema.json[JSON Schema] +
Versioning policy: link:VERSION-POLICY.adoc[Version Policy]
====

== Abstract

This document specifies the AGENTIC.scm format, a Scheme-based syntax for
encoding AI agent operational gating policies. AGENTIC files define *whether*
an action may proceed *now*, separate from constitutional permission (META)
or semantic meaning (NEUROSYM). AGENTIC implements safety controls including
entropy budgets, risk thresholds, and confirmation requirements.

== Status of This Memo

This document specifies an experimental protocol for the Internet community.
This is a contribution to the RFC series, independently of any other RFC stream.
Discussion and suggestions for improvement are requested.

== Copyright Notice

Copyright (c) 2025-2026 Jonathan D.A. Jewell. AGPL-3.0-or-later.

== Introduction

=== Purpose

AGENTIC.scm addresses the need for machine-readable operational safety that:

1. **Gates Execution** - Controls whether permitted actions may proceed now
2. **Manages Entropy** - Tracks and limits accumulated operational risk
3. **Requires Confirmation** - Explicit user intent for high-risk operations
4. **Records Decisions** - Auditable trail of gating decisions

=== Design Goals

Subordinate to META::
  AGENTIC gates actions already validated by META, does not grant new authority

Explicit Intent::
  User memories and inferred goals are NOT equivalent to explicit present intent

Proof-Aware::
  Treats proof outcomes as truth predicates (verified vs unverified)

Fail-Safe::
  Denial causes no side effects, state remains unchanged

=== Relationship to Other Specifications

[cols="1,3"]
|===
|Specification |Relationship

|META.scm
|AGENTIC is subordinate to META, cannot override META axioms

|PLAYBOOK.scm
|AGENTIC gates PLAYBOOK execution

|NEUROSYM.scm
|AGENTIC uses NEUROSYM proof outcomes as truth predicates

|STATE.scm
|AGENTIC denial leaves STATE unchanged
|===

== Terminology

=== Key Words

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in BCP 14 (RFC 2119, RFC 8174).

=== Definitions

AGENTIC File::
  A file with `.scm` extension (typically `AGENTIC.scm`) containing
  operational gating policies in the format specified by this document.

Gating::
  The decision of whether a permitted action may proceed at this time.

Entropy Budget::
  A measure of accumulated operational risk within a session or timeframe.

Override::
  A mechanism to bypass AGENTIC gating when META permits and user provides
  explicit present intent.

Explicit Present Intent::
  A direct, unambiguous request from the user in the current interaction,
  distinct from memories, preferences, or inferred goals.

== File Structure

=== Overview

An AGENTIC file consists of:

1. **Header Comments** - License and file description
2. **Module Declaration** - Scheme module definition
3. **Policy Definitions** - Gating rules and thresholds
4. **Override Definitions** - Permitted override paths

=== Header Comments

AGENTIC files MUST begin with SPDX license headers:

[source,scheme]
----
;; SPDX-License-Identifier: MPL-2.0-or-later
;; SPDX-FileCopyrightText: 2025 Example Author

;;; AGENTIC.scm — Operational Gating Policies
;;; project-name
----

=== Module Declaration

[source,scheme]
----
(define-module (project-name agentic)
  #:export (gating-policies
            entropy-budgets
            risk-thresholds
            override-paths
            decision-recording))
----

== Core Sections

=== Gating Policies (`gating-policies`)

==== Purpose

Defines rules for when actions may proceed.

==== Structure

[source,scheme]
----
(define gating-policies
  '((default
     (mode . "strict")
     (require-explicit-intent . #t)
     (log-all-decisions . #t))

    (file-operations
     (read . "auto")
     (write . "confirm-if-external")
     (delete . "require-explicit-intent")
     (execute . "require-confirmation"))

    (network-operations
     (internal . "auto")
     (external . "require-confirmation")
     (credentials . "require-explicit-intent"))

    (state-mutations
     (reversible . "auto")
     (compensable . "require-confirmation")
     (irreversible . "require-explicit-intent"))))
----

==== Gate Modes

* `auto` - Proceed without additional confirmation
* `confirm-if-external` - Confirm if interacting with external systems
* `require-confirmation` - Always require user confirmation
* `require-explicit-intent` - Require explicit present intent (strongest)
* `deny` - Never permit, even with override

=== Entropy Budgets (`entropy-budgets`)

==== Purpose

Tracks accumulated operational risk.

==== Structure

[source,scheme]
----
(define entropy-budgets
  '((session
     (max-entropy . 100)
     (current . 0)
     (reset-on . "session-end"))

    (operation-costs
     (file-read . 1)
     (file-write . 5)
     (file-delete . 20)
     (network-request . 3)
     (external-api . 10)
     (state-mutation . 8)
     (irreversible-action . 50))

    (thresholds
     ((level "low") (max . 25) (mode . "auto"))
     ((level "medium") (max . 50) (mode . "confirm"))
     ((level "high") (max . 75) (mode . "require-explicit"))
     ((level "critical") (max . 100) (mode . "deny-new")))))
----

=== Risk Thresholds (`risk-thresholds`)

==== Purpose

Defines risk classification for operations.

==== Structure

[source,scheme]
----
(define risk-thresholds
  '((categories
     ((category "low")
      (description . "Reversible, internal operations")
      (gate . "auto"))
     ((category "medium")
      (description . "Compensable or external operations")
      (gate . "confirm"))
     ((category "high")
      (description . "Irreversible or sensitive operations")
      (gate . "require-explicit"))
     ((category "critical")
      (description . "Security-sensitive or destructive operations")
      (gate . "deny-without-override")))

    (classification-rules
     ((pattern "file:delete:*") (category . "high"))
     ((pattern "network:external:*") (category . "medium"))
     ((pattern "state:mutate:irreversible") (category . "critical"))
     ((pattern "auth:credential:*") (category . "critical")))))
----

=== Override Paths (`override-paths`)

==== Purpose

Defines when and how AGENTIC gating may be bypassed.

==== Structure

[source,scheme]
----
(define override-paths
  '((requirements
     (meta-permits . #t)
     (explicit-present-intent . #t)
     (proof-or-retype . #t))

    (permitted-overrides
     ((class "high-entropy-operation")
      (meta-rule . "adr-003")
      (requires . ("explicit-intent" "confirmation"))
      (retype-to . "unverified"))

     ((class "external-api-call")
      (meta-rule . "adr-007")
      (requires . ("explicit-intent"))
      (retype-to . #f)))

    (never-override
     ("credential-exfiltration"
      "system-file-modification"
      "security-bypass"))))
----

=== Decision Recording (`decision-recording`)

==== Purpose

Configures audit trail for gating decisions.

==== Structure

[source,scheme]
----
(define decision-recording
  '((log-all . #t)
    (include-context . #t)
    (retention-days . 90)
    (sensitive-fields . ("credentials" "tokens" "keys"))

    (record-format
     ((field "timestamp") (format . "ISO-8601"))
     ((field "action") (format . "pattern-string"))
     ((field "gate") (format . "auto|confirm|deny"))
     ((field "outcome") (format . "proceed|blocked|overridden"))
     ((field "entropy-cost") (format . "integer"))
     ((field "user-intent") (format . "explicit|inferred|none")))))
----

== Execution Pipeline Position

AGENTIC operates at step 2 in the pipeline:

[source]
----
1. META validation      ← Constitutional authority check
2. AGENTIC gating       ← THIS SPECIFICATION
3. NEUROSYM semantics   ← Proof obligations
4. PLAYBOOK derivation  ← Build executable plan
5. Execution
6. ECOSYSTEM check
7. STATE update
----

=== Pipeline Rules

* AGENTIC MUST gate only actions already validated by META
* AGENTIC MUST NOT introduce new authority that contradicts META
* AGENTIC MAY block execution unless META defines an override path
* If AGENTIC denies, no side effects MUST occur

== Override Requirements

If AGENTIC blocks an action, it MAY be overridden ONLY if:

1. META defines the override class
2. The user provides explicit present intent
3. The action is retyped appropriately if proof obligations are not discharged

All overrides MUST be recorded as decision records.

== Security Considerations

=== Intent Verification

User memories, project memories, or inferred goals MUST NOT be treated as
equivalent to explicit present user intent.

=== Entropy Management

Entropy budgets prevent runaway operations by limiting accumulated risk
within a session or timeframe.

=== Audit Trail

All gating decisions MUST be logged for security review.

== IANA Considerations

=== Media Type Registration

* **Type name**: application
* **Subtype name**: agentic+scheme
* **Required parameters**: None
* **Optional parameters**: charset (default UTF-8), version
* **Encoding considerations**: UTF-8 text
* **Security considerations**: See Security Considerations section
* **Published specification**: This document

== Conformance

An implementation is AGENTIC-conformant if:

* Gating occurs only for META-validated actions
* Explicit present intent is distinguished from inferred intent
* Entropy budgets are tracked and enforced
* All decisions are recorded
* Override requirements are strictly enforced

