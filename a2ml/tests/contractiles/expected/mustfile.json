{
  "checks": [
    {
      "description": "config/policy.yaml must be valid",
      "name": "policy-config-valid",
      "run": "just validate-policy"
    },
    {
      "description": "policy/policy.ncl must compile",
      "name": "policy-nickel-compiles",
      "run": "just compile-nickel"
    },
    {
      "description": "gateway must expose port 8080",
      "name": "gateway-exposes-port",
      "run": "ss -lnt | rg \":8080\""
    },
    {
      "description": "logs must be JSON",
      "name": "logs-are-json",
      "run": "rg --files -g \"*.json\" logs | xargs -r jq -e ."
    },
    {
      "description": "schema must match v0.0.1",
      "name": "schema-version-matches",
      "run": "rg -n \"v0.0.1\" schema"
    }
  ],
  "parameters": {
    "gateway_port": "8080",
    "schema_version": "v0.0.1"
  },
  "spec_version": "1.0.0",
  "type": "mustfile"
}
