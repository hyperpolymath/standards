{
  "sections": {
    "Dust-Events": [
      {
        "name": "decision-log-to-dust",
        "notes": "map decision logs into reversible dust events",
        "source": "logs/decisions.json",
        "transform": "dustify --input logs/decisions.json --output logs/dust-events.json"
      }
    ],
    "Gateway": [
      {
        "event": "deploy.failure",
        "name": "bad-deployment",
        "notes": "preserve audit logs while rolling back",
        "undo": "gatewayctl rollback --last"
      }
    ],
    "Logs": [
      {
        "handler": "log-replay --reverse logs/decisions.json",
        "name": "gateway-decision-log",
        "path": "logs/decisions.json",
        "reversible": "true"
      }
    ],
    "Policy": [
      {
        "name": "policy-rollback",
        "notes": "rollback to the last known-good policy",
        "path": "policy/policy.ncl",
        "rollback": "git checkout HEAD~1 -- policy/policy.ncl"
      }
    ]
  },
  "spec_version": "1.0.0",
  "type": "dustfile"
}
