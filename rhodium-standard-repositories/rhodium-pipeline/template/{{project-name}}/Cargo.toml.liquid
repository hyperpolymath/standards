[package]
name = "{{ project-name }}"
version = "0.1.0"
edition = "2021"
rust-version = "{{ min_rust_version }}"
authors = ["{{ author }} <{{ email }}>"]
description = "{{ description }}"
license = "{{ license }}"
readme = "README.adoc"
repository = "https://gitlab.com/hyperpolymath/{{ project-name }}"
keywords = ["pipeline", "data-processing", "formally-verified"]
categories = ["command-line-utilities", "data-structures"]

[dependencies]
# CLI
clap = { version = "4", features = ["derive", "env", "string", "wrap_help"] }
clap_complete = "4"
clap_mangen = "0.2"

# Serialization
serde = { version = "1", features = ["derive"] }
serde_json = "1"
toml = "0.8"

# Async runtime
tokio = { version = "1", features = ["full"] }

# Error handling
thiserror = "1"
anyhow = "1"
color-eyre = "0.6"

# Logging & Tracing
tracing = "0.1"
tracing-subscriber = { version = "0.3", features = ["env-filter", "json"] }

# Checksums (SHAKE3-256 primary, BLAKE3 secondary)
sha3 = "0.10"
blake3 = "1"
digest = "0.10"
hex = "0.4"

# File handling
walkdir = "2"
glob = "0.3"
tempfile = "3"
directories = "5"

# Configuration
config = "0.14"
serde_yaml = "0.9"
base64 = "0.22"

# Progress & UI
indicatif = { version = "0.17", features = ["rayon"] }
console = "0.15"
dialoguer = "0.11"

# Parallelism
rayon = "1"
crossbeam = "0.8"

# Data formats
csv = "1"
parquet = { version = "53", optional = true }
arrow = { version = "53", optional = true }

{% if include_julia -%}
# Julia FFI
jlrs = { version = "0.20", optional = true }
{%- endif %}

[dev-dependencies]
proptest = "1"
criterion = "0.5"
assert_cmd = "2"
predicates = "3"
tempfile = "3"
rstest = "0.22"

[features]
default = ["parquet", "arrow"]
parquet = ["dep:parquet"]
arrow = ["dep:arrow"]
{% if include_julia -%}
julia = ["dep:jlrs"]
{%- endif %}
telemetry = []

[[bin]]
name = "{{ project-name }}"
path = "src/main.rs"

[lib]
name = "{{ project_name }}"
path = "src/lib.rs"

[[bench]]
name = "pipeline"
harness = false

[profile.release]
lto = true
codegen-units = 1
panic = "abort"
strip = true

[profile.dev]
opt-level = 0
debug = true

[profile.bench]
lto = true
codegen-units = 1
