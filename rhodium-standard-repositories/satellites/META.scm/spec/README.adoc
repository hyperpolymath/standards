= .scm Format Family - Specification Documents
:toc:
:icons: font

== Overview

This directory contains the formal specification infrastructure for the **.scm
Format Family**, a suite of Scheme S-expression-based data formats for software
engineering workflows.

=== Format Family Members

[cols="1,2,2"]
|===
|Format |Purpose |Media Type

|**META.scm**
|Project governance, ADRs, development practices
|`application/meta+scheme`

|**STATE.scm**
|AI conversation checkpoint/restore
|`application/state+scheme`
|===

Both formats share common S-expression syntax while serving complementary purposes.

== Document Index

=== Format Family (Shared)

link:SCM-FORMAT-FAMILY.adoc[SCM-FORMAT-FAMILY.adoc]::
  Umbrella specification describing the .scm format family, relationships
  between formats, and cross-format integration.

link:UNIFIED-STANDARDS-STRATEGY.adoc[UNIFIED-STANDARDS-STRATEGY.adoc]::
  Coordinated standards track strategy for the entire format family.

=== Shared Infrastructure

link:shared/s-expression.abnf[shared/s-expression.abnf]::
  Common ABNF grammar for S-expression primitives shared by all formats.
  Includes symbols, strings, numbers, comments, dates, and URIs.

link:shared/scm-common.schema.json[shared/scm-common.schema.json]::
  Shared JSON Schema definitions reusable across format-specific schemas.
  Includes common types like dates, versions, identifiers, and references.

=== META.scm Specification

link:META-FORMAT-SPEC.adoc[META-FORMAT-SPEC.adoc]::
  Complete META format specification in IETF Internet-Draft style. Defines
  all sections, data types, parsing requirements, and security considerations.

link:abnf/meta.abnf[abnf/meta.abnf]::
  META-specific ABNF grammar (imports shared primitives). Defines module
  declarations, ADR structure, and practice sections.

link:schema/meta.schema.json[schema/meta.schema.json]::
  JSON Schema (Draft 2020-12) for validating META files in JSON binding format.

=== Standards Track

link:STANDARDS-TRACK.adoc[STANDARDS-TRACK.adoc]::
  META.scm-specific standards analysis and roadmap.

link:UNIFIED-STANDARDS-STRATEGY.adoc[UNIFIED-STANDARDS-STRATEGY.adoc]::
  Coordinated strategy for the entire .scm format family.

=== Policy Documents

link:VERSION-POLICY.adoc[VERSION-POLICY.adoc]::
  Version evolution policy following Semantic Versioning 2.0.0.

link:IANA-MEDIA-TYPE.adoc[IANA-MEDIA-TYPE.adoc]::
  IANA media type registration template for `application/meta+scheme`.

== Quick Start

=== Reading the Specifications

1. **Format Family Overview**: Start with link:SCM-FORMAT-FAMILY.adoc[SCM-FORMAT-FAMILY.adoc]
2. **META.scm Details**: Read link:META-FORMAT-SPEC.adoc[META-FORMAT-SPEC.adoc]
3. **Examples**: Review link:../examples/[examples/] for practical usage
4. **Validation**: Use link:schema/meta.schema.json[JSON Schema] for tooling

=== Implementing a Parser

1. Implement shared S-expression parser from link:shared/s-expression.abnf[shared/s-expression.abnf]
2. Add META-specific validation from link:abnf/meta.abnf[abnf/meta.abnf]
3. Use JSON Schema for JSON binding validation

=== Contributing to Standardization

1. Review link:UNIFIED-STANDARDS-STRATEGY.adoc[UNIFIED-STANDARDS-STRATEGY.adoc] for the roadmap
2. Check link:VERSION-POLICY.adoc[VERSION-POLICY.adoc] for change procedures
3. Open issues or PRs on the GitHub repository

== Format Relationships

----
                    ┌─────────────────────────────────────┐
                    │     .scm Format Family              │
                    │   shared/s-expression.abnf          │
                    │   shared/scm-common.schema.json     │
                    └─────────────────────────────────────┘
                                    │
                    ┌───────────────┴───────────────┐
                    │                               │
            ┌───────▼───────┐               ┌──────▼──────┐
            │   META.scm    │               │  STATE.scm  │
            │               │               │             │
            │ • ADRs        │               │ • Sessions  │
            │ • Practices   │◄─────────────►│ • Context   │
            │ • Rationale   │  References   │ • Progress  │
            └───────────────┘               └─────────────┘
----

STATE.scm files can reference META.scm for project context:

[source,scheme]
----
;; In STATE.scm
(define projects
  '((name . "my-project")
    (meta-ref . "META.scm")           ; Reference to META.scm
    (active-adrs . (adr-001 adr-003)) ; Currently relevant decisions
    (relevant-practices . (security testing))))
----

== Standards Track Summary

[cols="1,2,1"]
|===
|Body |Role |Status

|IETF
|RFC series (core + META + STATE)
|Phase 1: Community Spec

|IANA
|Media types (`application/*+scheme`)
|Pending Phase 2

|SPDX
|Integration for license/dependency metadata
|Future consideration

|ISO
|Formal international standard
|Future consideration (Year 5+)
|===

== Directory Structure

----
spec/
├── README.adoc                      # This file
├── SCM-FORMAT-FAMILY.adoc           # Format family overview
├── UNIFIED-STANDARDS-STRATEGY.adoc  # Coordinated standards approach
├── META-FORMAT-SPEC.adoc            # META.scm specification
├── STANDARDS-TRACK.adoc             # META-specific standards roadmap
├── VERSION-POLICY.adoc              # Version evolution policy
├── IANA-MEDIA-TYPE.adoc             # Media type registration
├── abnf/
│   └── meta.abnf                    # META-specific grammar
├── schema/
│   └── meta.schema.json             # META JSON Schema
└── shared/
    ├── s-expression.abnf            # Shared S-expression grammar
    └── scm-common.schema.json       # Shared JSON Schema definitions
----

== Contributing

See the main repository CONTRIBUTING.md for contribution guidelines.

Specification changes follow the process defined in VERSION-POLICY.adoc.

== License

Specifications are released under MIT License.
Copyright (c) 2025 Jonathan D.A. Jewell.
