= META Format Version Evolution Policy
:toc: left
:toclevels: 3
:sectnums:

== Overview

This document defines the versioning strategy, compatibility guarantees, and
evolution procedures for the META (Machine-readable Engineering and Technical
Architecture) format specification.

== Version Numbering

=== Semantic Versioning

META format versions follow https://semver.org/[Semantic Versioning 2.0.0]:

----
MAJOR.MINOR.PATCH
----

[cols="1,3,2"]
|===
|Component |Changed When |Example

|MAJOR
|Breaking changes to required sections or core semantics
|1.0.0 → 2.0.0

|MINOR
|New optional sections, new optional fields, new status values
|1.0.0 → 1.1.0

|PATCH
|Clarifications, typo fixes, non-normative changes
|1.0.0 → 1.0.1
|===

=== Pre-release Versions

During initial development, versions use pre-release identifiers:

----
1.0.0-draft.1    First draft
1.0.0-draft.2    Second draft
1.0.0-rc.1       Release candidate 1
1.0.0            Stable release
----

=== Current Version

The current specification version is `1.0.0-draft.1`.


== Compatibility Guarantees

=== Forward Compatibility

Newer META files SHOULD be readable by older parsers with graceful degradation:

[cols="1,3"]
|===
|Addition Type |Older Parser Behavior

|New optional field
|Field ignored

|New optional section
|Section ignored

|New ADR status value
|MAY reject or treat as unknown

|New practice category
|Category ignored
|===

=== Backward Compatibility

Older META files MUST be readable by newer parsers:

* All valid 1.x files will remain valid in future 1.x versions
* Deprecated fields will be supported with warnings
* Only MAJOR version changes may remove features

=== Breaking Changes

The following are considered breaking changes (MAJOR version):

* Removing a required field
* Changing the semantics of an existing field
* Changing the module declaration syntax
* Removing support for an ADR status value
* Changing required to optional (or vice versa)


== Deprecation Process

=== Deprecation Timeline

1. **Announcement** (version N): Feature marked deprecated in specification
2. **Warning Period** (versions N through N+2): Parsers emit warnings
3. **Removal** (version N+3 or next MAJOR): Feature removed

=== Deprecation Markers

Deprecated features are marked in the specification with:

[source,asciidoc]
----
[DEPRECATED]
====
Deprecated in version 1.2.0. Use `new-field` instead.
Will be removed in version 2.0.0.
====
----


== Evolution Procedures

=== Proposing Changes

Changes to the META format follow this process:

1. **RFC (Request for Comments)**
   - Open GitHub issue with `rfc:` prefix
   - Describe motivation, proposed change, compatibility impact
   - Allow 14 days for community feedback

2. **Draft Specification**
   - Create pull request with specification changes
   - Update ABNF grammar, JSON Schema, examples
   - Include changelog entry

3. **Review Period**
   - Minimum 7 days for review
   - Address feedback and concerns
   - Obtain approval from maintainers

4. **Release**
   - Merge to main branch
   - Tag release with version number
   - Update published specifications

=== Change Categories

==== Non-breaking Changes (PATCH)

* Typo corrections in specification text
* Clarification of ambiguous wording
* Additional examples
* Non-normative notes

==== Backward-compatible Changes (MINOR)

* New optional fields in existing sections
* New optional sections (extension mechanism)
* New ADR status values
* New practice categories
* Additional validation rules (warnings only)

==== Breaking Changes (MAJOR)

* Removal of fields or sections
* Changes to required fields
* Structural changes to core sections
* Semantic changes to existing fields


== Version Declaration

=== In META Files

META files MAY declare their format version:

[source,scheme]
----
;;; META.scm — Architecture Decisions (META Format 1.0)
----

Or in a metadata section:

[source,scheme]
----
(define meta-format-version "1.0.0")
----

=== Version Detection

Parsers SHOULD:

1. Check for explicit version declaration
2. Infer version from structure if not declared
3. Default to latest supported version
4. Warn if version is newer than supported


== Migration Guides

=== Version Migration Process

When a new MAJOR version is released:

1. **Migration Guide Published**
   - Document all breaking changes
   - Provide before/after examples
   - Include automated migration scripts where possible

2. **Coexistence Period**
   - Both versions supported for minimum 6 months
   - Tooling supports both formats
   - Automatic detection and conversion

3. **Legacy Support Ends**
   - Old version documentation archived
   - Parsers may drop support
   - Migration tools remain available


== Governance

=== Decision Authority

Version evolution decisions are made by:

* **Patch releases**: Any maintainer
* **Minor releases**: Maintainer consensus
* **Major releases**: Community RFC process with maintainer approval

=== Release Schedule

* **Patch releases**: As needed
* **Minor releases**: Quarterly maximum
* **Major releases**: Annual maximum (exceptional circumstances only)


== Changelog

=== Version 1.0.0-draft.1 (December 2025)

Initial draft specification including:

* Core sections: `architecture-decisions`, `development-practices`, `design-rationale`
* ABNF grammar
* JSON Schema binding
* Extension mechanism


== References

* https://semver.org/[Semantic Versioning 2.0.0]
* https://keepachangelog.com/[Keep a Changelog]
* https://www.conventionalcommits.org/[Conventional Commits]
