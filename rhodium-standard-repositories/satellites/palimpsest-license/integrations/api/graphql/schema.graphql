# Palimpsest License GraphQL Schema

"""
The root query type
"""
type Query {
  """
  Get information about a specific license version
  """
  license(version: String!): License

  """
  Get all available license versions
  """
  licenses: [License!]!

  """
  Validate metadata for Palimpsest License compliance
  """
  validateMetadata(metadata: MetadataInput!): ValidationResult!

  """
  Validate a URL for license metadata
  """
  validateUrl(url: String!, checkHtml: Boolean, checkJsonLd: Boolean): UrlValidationResult!

  """
  Check compliance status
  """
  checkCompliance(metadata: MetadataInput!, strictMode: Boolean): ComplianceResult!
}

"""
The root mutation type
"""
type Mutation {
  """
  Generate license metadata
  """
  generateMetadata(input: MetadataGenerationInput!): GeneratedMetadata!

  """
  Register a work with Palimpsest License
  """
  registerWork(input: WorkRegistrationInput!): WorkRegistration!
}

"""
License information
"""
type License {
  """License version"""
  version: String!

  """License name"""
  name: String!

  """License identifier (e.g., Palimpsest-0.4)"""
  identifier: String!

  """License URL"""
  url: String!

  """Full license text"""
  fullText: String

  """Brief summary"""
  summary: String

  """Key features"""
  features: [String!]!

  """Release date"""
  releaseDate: String

  """Previous version"""
  previousVersion: License

  """Next version"""
  nextVersion: License
}

"""
Creative work metadata
"""
type Metadata {
  """Schema.org context"""
  context: String!

  """Type (always CreativeWork)"""
  type: String!

  """Work title"""
  name: String

  """License URL"""
  license: String!

  """Author information"""
  author: Author!

  """Additional properties"""
  additionalProperty: [PropertyValue!]

  """Usage information"""
  usageInfo: String
}

"""
Author information
"""
type Author {
  """Type (Person or Organization)"""
  type: String!

  """Author name"""
  name: String!

  """Author URL"""
  url: String
}

"""
Property value for additional metadata
"""
type PropertyValue {
  """Type (always PropertyValue)"""
  type: String!

  """Property name"""
  name: String!

  """Property value"""
  value: String!
}

"""
Validation result
"""
type ValidationResult {
  """Whether metadata is valid"""
  valid: Boolean!

  """Validation errors"""
  errors: [String!]!

  """Validation warnings"""
  warnings: [String!]!

  """Validated metadata"""
  metadata: Metadata
}

"""
URL validation result
"""
type UrlValidationResult {
  """Validated URL"""
  url: String!

  """Whether metadata is valid"""
  valid: Boolean!

  """Whether metadata was found"""
  metadataFound: Boolean!

  """Extracted metadata"""
  metadata: Metadata

  """Validation errors"""
  errors: [String!]!

  """Sources where metadata was found"""
  sources: [MetadataSource!]!
}

"""
Metadata sources
"""
enum MetadataSource {
  HTML_META
  JSONLD
  HTTP_HEADERS
}

"""
Generated metadata
"""
type GeneratedMetadata {
  """JSON-LD metadata"""
  jsonld: String

  """HTML meta tags"""
  htmlMeta: String

  """HTTP headers"""
  httpHeaders: [HttpHeader!]
}

"""
HTTP header
"""
type HttpHeader {
  """Header name"""
  name: String!

  """Header value"""
  value: String!
}

"""
Compliance check result
"""
type ComplianceResult {
  """Whether work is compliant"""
  compliant: Boolean!

  """Individual compliance checks"""
  checks: ComplianceChecks!

  """Recommendations for improvement"""
  recommendations: [String!]!

  """Compliance errors"""
  errors: [String!]!
}

"""
Individual compliance checks
"""
type ComplianceChecks {
  """Metadata is present"""
  metadataPresent: Boolean!

  """Required fields are present"""
  requiredFieldsPresent: Boolean!

  """Emotional lineage is declared"""
  emotionalLineageDeclared: Boolean!

  """AGI consent is specified"""
  agiConsentSpecified: Boolean!

  """Metadata preservation is enforced"""
  metadataPreservationEnforced: Boolean!
}

"""
Work registration
"""
type WorkRegistration {
  """Registration ID"""
  id: ID!

  """Work title"""
  workTitle: String!

  """Author name"""
  authorName: String!

  """License version"""
  version: String!

  """Registration timestamp"""
  registeredAt: String!

  """Generated metadata"""
  metadata: Metadata!
}

# Input types

"""
Metadata input
"""
input MetadataInput {
  """Work title"""
  name: String

  """License URL"""
  license: String!

  """Author information"""
  author: AuthorInput!

  """Additional properties"""
  additionalProperty: [PropertyValueInput!]
}

"""
Author input
"""
input AuthorInput {
  """Author type"""
  type: String!

  """Author name"""
  name: String!

  """Author URL"""
  url: String
}

"""
Property value input
"""
input PropertyValueInput {
  """Property name"""
  name: String!

  """Property value"""
  value: String!
}

"""
Metadata generation input
"""
input MetadataGenerationInput {
  """Work title"""
  workTitle: String!

  """Author name"""
  authorName: String!

  """Author URL"""
  authorUrl: String

  """Emotional lineage description"""
  emotionalLineage: String

  """License version"""
  version: String

  """AGI consent required"""
  agiConsentRequired: Boolean

  """Desired output format"""
  format: MetadataFormat
}

"""
Metadata format
"""
enum MetadataFormat {
  JSONLD
  HTML_META
  HTTP_HEADERS
  ALL
}

"""
Work registration input
"""
input WorkRegistrationInput {
  """Work title"""
  workTitle: String!

  """Author name"""
  authorName: String!

  """Author URL"""
  authorUrl: String

  """Emotional lineage"""
  emotionalLineage: String

  """License version"""
  version: String

  """AGI consent required"""
  agiConsentRequired: Boolean
}
