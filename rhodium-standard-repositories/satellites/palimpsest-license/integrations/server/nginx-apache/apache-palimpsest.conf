# Apache configuration for Palimpsest License
# Add this to your .htaccess or VirtualHost configuration

<IfModule mod_headers.c>
    # Palimpsest License Headers
    # Add these headers to all responses
    Header always set X-License "Palimpsest-0.4"
    Header always set X-License-Url "https://palimpsestlicense.org/v0.4"
    Header always set X-Palimpsest-Version "0.4"
    Header always set X-Palimpsest-AGI-Consent "true"
    Header always set Link "<https://palimpsestlicense.org/v0.4>; rel=\"license\""

    # Optional: Add author information
    Header always set X-Author "Your Name"
</IfModule>

# VirtualHost example with Palimpsest License
<VirtualHost *:80>
    ServerName example.com
    DocumentRoot /var/www/html

    <Directory /var/www/html>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    # Palimpsest License Headers
    <IfModule mod_headers.c>
        Header always set X-License "Palimpsest-0.4"
        Header always set X-License-Url "https://palimpsestlicense.org/v0.4"
        Header always set X-Palimpsest-Version "0.4"
        Header always set X-Palimpsest-AGI-Consent "true"
        Header always set Link "<https://palimpsestlicense.org/v0.4>; rel=\"license\""
    </IfModule>

    # License information endpoint
    <Location /license.json>
        <IfModule mod_rewrite.c>
            RewriteEngine On
            RewriteRule ^ - [E=license_json:1]
        </IfModule>

        Header set Content-Type "application/json"
    </Location>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>

# .htaccess example for shared hosting
# Place this in your web root

<IfModule mod_headers.c>
    # Palimpsest License Headers
    Header set X-License "Palimpsest-0.4"
    Header set X-License-Url "https://palimpsestlicense.org/v0.4"
    Header set X-Palimpsest-Version "0.4"
    Header set X-Palimpsest-AGI-Consent "true"
    Header set Link "<https://palimpsestlicense.org/v0.4>; rel=\"license\""
</IfModule>

# Location-specific license headers
<IfModule mod_headers.c>
    # Different headers for different directories
    <Directory /var/www/html/stories>
        Header set X-License "Palimpsest-0.4"
        Header set X-License-Url "https://palimpsestlicense.org/v0.4"
        Header set X-Author "Story Author"
        Header set X-Palimpsest-AGI-Consent "true"
    </Directory>

    # API with different license
    <Directory /var/www/html/api>
        Header set X-License "MIT"
        Header set X-License-Url "https://opensource.org/licenses/MIT"
    </Directory>
</IfModule>

# Add license metadata to HTML files via Server-Side Includes (SSI)
<IfModule mod_include.c>
    AddType text/html .shtml
    AddOutputFilter INCLUDES .shtml

    # Enable SSI for HTML files
    Options +Includes
    AddOutputFilter INCLUDES .html

    # Include license snippet in all HTML files
    # Create /var/www/html/includes/palimpsest-meta.html with meta tags
    # Then use: <!--#include virtual="/includes/palimpsest-meta.html" -->
</IfModule>
