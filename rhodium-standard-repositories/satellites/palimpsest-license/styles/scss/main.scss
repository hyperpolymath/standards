/*!
 * Palimpsest License Styling System
 * Version: 0.4.0
 * Description: Comprehensive SCSS framework for the Palimpsest License project
 * License: MIT
 * Repository: https://github.com/palimpsest-license
 */

// ============================================================================
// Configuration and Utilities
// ============================================================================

// Note: Import GitHub markdown styles via HTML link tag:
// <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.6.1/github-markdown.min.css">

// Functions (must be first, no dependencies)
@use 'functions' as *;

// Variables (depends on functions)
@use 'variables' as *;

// Mixins (depends on variables and functions)
@use 'mixins' as *;

// ============================================================================
// Base Styles
// ============================================================================

@use 'base/reset';
@use 'base/accessibility';
@use 'base/typography';

// ============================================================================
// Layout Components
// ============================================================================

@use 'layout/containers';

// ============================================================================
// UI Components
// ============================================================================

@use 'components/license-display';
@use 'components/badge';
@use 'components/metadata';
@use 'components/compliance';

// ============================================================================
// Utilities
// ============================================================================

@use 'utilities/utilities';

// ============================================================================
// Themes
// ============================================================================

@use 'themes/themes';

// ============================================================================
// Custom Styles (Project-Specific)
// ============================================================================

// Language switcher (bilingual support)
.language-switcher {
  display: flex;
  gap: $spacing-md;
  margin-bottom: $spacing-lg;

  a {
    display: inline-block;
    padding: $spacing-sm $spacing-md;
    border-radius: $border-radius-sm;
    text-decoration: none;
    transition: background-color $transition-speed-normal;

    &:hover,
    &:focus {
      background-color: colour-opacity(var(--colour-accent), 0.1);
      outline: none;
    }

    &[aria-current="true"],
    &.active {
      font-weight: $font-weight-semibold;
      background-color: colour-opacity(var(--colour-accent), 0.1);
      color: var(--colour-accent);
    }
  }
}

// Table accessibility (enhanced from base)
table {
  width: 100%;
  border-collapse: collapse;
  margin: $spacing-md 0;
  caption-side: top;

  th, td {
    padding: $spacing-sm;
    text-align: left;
    border: $border-width-thin solid var(--colour-border);
  }

  th {
    background-color: var(--colour-surface);
    font-weight: $font-weight-semibold;
    position: sticky;
    top: 0;
    z-index: 1;
  }

  tr:nth-child(even) {
    background-color: colour-opacity(var(--colour-surface), 0.5);
  }

  caption {
    font-weight: $font-weight-semibold;
    margin-bottom: $spacing-sm;
    text-align: left;
  }
}

// Enhanced markdown body with WCAG compliance
.markdown-body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: $max-width-lg;
  margin: 0 auto;
  padding: $spacing-2xl;
  font-size: $font-size-base;
  line-height: $line-height-relaxed;
  tab-size: 4;
  hyphens: auto;
  text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  -moz-text-size-adjust: 100%;
  word-break: break-word;
  overflow-wrap: break-word;

  @include breakpoint-down(md) {
    padding: $spacing-md;
    font-size: $font-size-sm;
  }

  // Preserve ARIA attributes
  &[role="main"] {
    position: relative;
  }

  &[aria-labelledby] {
    // Ensure proper labelling
  }
}

// ============================================================================
// Animation Definitions
// ============================================================================

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideInUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

// ============================================================================
// Helper Classes
// ============================================================================

// Fade in on load
.fade-in {
  @include fade-in;
}

// Slide in on load
.slide-in {
  @include slide-in;
}

// Hover lift effect
.hover-lift {
  @include hover-lift;
}

// Card style
.card {
  @include card;
}

// Container
.container {
  @include container;
}

// Accessibility helpers
.skip-to-content {
  @include sr-only;
  position: fixed;
  top: $spacing-sm;
  left: $spacing-sm;
  z-index: $z-index-tooltip;

  &:focus {
    position: fixed;
    width: auto;
    height: auto;
    padding: $spacing-sm $spacing-md;
    background-color: var(--colour-background);
    color: var(--colour-text);
    border: $border-width-medium solid var(--colour-accent);
    border-radius: $border-radius-md;
    clip: auto;
    overflow: visible;
    white-space: normal;
  }
}

// ============================================================================
// Documentation-Specific Styles
// ============================================================================

// Version badge in documentation
.doc-version {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-xs $spacing-sm;
  background: linear-gradient(135deg,
    $colour-palimpsest-primary,
    $colour-palimpsest-accent);
  color: #ffffff;
  border-radius: $border-radius-full;
  font-size: $font-size-xs;
  font-weight: $font-weight-semibold;

  &::before {
    content: "v";
    opacity: 0.8;
  }
}

// Status indicators in documentation
.doc-status {
  display: inline-block;
  padding: $spacing-xs $spacing-sm;
  border-radius: $border-radius-sm;
  font-size: $font-size-xs;
  font-weight: $font-weight-semibold;
  text-transform: uppercase;
  letter-spacing: 0.05em;

  &--draft {
    background-color: colour-opacity($colour-pending, 0.1);
    color: $colour-pending;
    border: $border-width-thin solid $colour-pending;
  }

  &--review {
    background-color: colour-opacity($colour-warning, 0.1);
    color: darken-colour($colour-warning, 40%);
    border: $border-width-thin solid $colour-warning;
  }

  &--final {
    background-color: colour-opacity($colour-success, 0.1);
    color: $colour-success;
    border: $border-width-thin solid $colour-success;
  }
}

// Code example containers
.code-example {
  margin: $spacing-lg 0;
  border: $border-width-thin solid var(--colour-border);
  border-radius: $border-radius-md;
  overflow: hidden;

  &__header {
    padding: $spacing-sm $spacing-md;
    background-color: var(--colour-surface);
    border-bottom: $border-width-thin solid var(--colour-border);
    font-size: $font-size-sm;
    font-weight: $font-weight-semibold;
  }

  &__body {
    padding: $spacing-md;

    pre {
      margin: 0;
    }
  }
}

// ============================================================================
// Responsive Adjustments
// ============================================================================

// Mobile-specific enhancements
@include breakpoint-down(md) {
  // Larger touch targets on mobile
  a,
  button,
  .badge,
  .compliance-status {
    min-height: $min-touch-target;
  }

  // Enhanced focus for mobile
  :focus {
    outline-offset: 4px;
  }

  // Adjust spacing for mobile
  .license-display,
  .metadata,
  .compliance-card {
    padding: $spacing-md;
  }
}

// ============================================================================
// End of Stylesheet
// ============================================================================
