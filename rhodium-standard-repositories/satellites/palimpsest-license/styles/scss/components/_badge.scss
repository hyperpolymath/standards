// components/_badge.scss
// Badge and label styles for Palimpsest License

@use '../variables' as *;
@use '../mixins' as *;
@use '../functions' as *;

// ============================================================================
// Base Badge
// ============================================================================

.badge {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $badge-padding-y $badge-padding-x;
  font-size: $badge-font-size;
  font-weight: $badge-font-weight;
  line-height: 1;
  text-align: center;
  white-space: nowrap;
  vertical-align: baseline;
  border-radius: $badge-border-radius;
  background-color: var(--colour-surface);
  color: var(--colour-text);
  border: $border-width-thin solid var(--colour-border);

  // Badge with icon
  &__icon {
    display: inline-flex;
    width: 1em;
    height: 1em;
  }

  // Remove link styling when badge is inside a link
  a > & {
    text-decoration: none;
  }
}

// ============================================================================
// Badge Variants (Semantic)
// ============================================================================

.badge--success {
  background-color: colour-opacity($colour-success, 0.1);
  color: $colour-success;
  border-color: $colour-success;
}

.badge--warning {
  background-color: colour-opacity($colour-warning, 0.1);
  color: darken-colour($colour-warning, 40%);
  border-color: $colour-warning;
}

.badge--error {
  background-color: colour-opacity($colour-error, 0.1);
  color: $colour-error;
  border-color: $colour-error;
}

.badge--info {
  background-color: colour-opacity($colour-info, 0.1);
  color: $colour-info;
  border-color: $colour-info;
}

.badge--accent {
  background-color: var(--colour-accent);
  color: var(--colour-background);
  border-color: var(--colour-accent);
}

// ============================================================================
// Badge Variants (License Status)
// ============================================================================

.badge--compliant {
  background-color: colour-opacity($colour-compliant, 0.1);
  color: $colour-compliant;
  border-color: $colour-compliant;

  &::before {
    content: "✓";
    margin-right: $spacing-xs;
  }
}

.badge--partial {
  background-color: colour-opacity($colour-partial, 0.1);
  color: darken-colour($colour-partial, 40%);
  border-color: $colour-partial;

  &::before {
    content: "⚠";
    margin-right: $spacing-xs;
  }
}

.badge--violation {
  background-color: colour-opacity($colour-violation, 0.1);
  color: $colour-violation;
  border-color: $colour-violation;

  &::before {
    content: "✗";
    margin-right: $spacing-xs;
  }
}

.badge--pending {
  background-color: colour-opacity($colour-pending, 0.1);
  color: $colour-pending;
  border-color: $colour-pending;

  &::before {
    content: "○";
    margin-right: $spacing-xs;
  }
}

// ============================================================================
// Badge Sizes
// ============================================================================

.badge--sm {
  padding: calc(#{$badge-padding-y} * 0.75) calc(#{$badge-padding-x} * 0.75);
  font-size: calc(#{$badge-font-size} * 0.875);
}

.badge--lg {
  padding: calc(#{$badge-padding-y} * 1.5) calc(#{$badge-padding-x} * 1.5);
  font-size: calc(#{$badge-font-size} * 1.25);
}

// ============================================================================
// Badge Pill (rounded)
// ============================================================================

.badge--pill {
  border-radius: $border-radius-full;
}

// ============================================================================
// Badge Outline (transparent background)
// ============================================================================

.badge--outline {
  background-color: transparent;
  border-width: $border-width-medium;

  &.badge--success {
    color: $colour-success;
  }

  &.badge--warning {
    color: darken-colour($colour-warning, 40%);
  }

  &.badge--error {
    color: $colour-error;
  }

  &.badge--info {
    color: $colour-info;
  }

  &.badge--accent {
    color: var(--colour-accent);
  }
}

// ============================================================================
// License Version Badge
// ============================================================================

.badge-version {
  display: inline-flex;
  align-items: center;
  padding: $spacing-xs $spacing-md;
  background: linear-gradient(135deg, $colour-palimpsest-primary, $colour-palimpsest-accent);
  color: #ffffff;
  border-radius: $border-radius-full;
  font-size: $font-size-sm;
  font-weight: $font-weight-semibold;
  border: none;

  &::before {
    content: "v";
    opacity: 0.8;
    margin-right: 2px;
  }
}

// ============================================================================
// Language Badge
// ============================================================================

.badge-language {
  display: inline-flex;
  align-items: center;
  padding: $spacing-xs $spacing-sm;
  background-color: var(--colour-surface);
  border: $border-width-thin solid var(--colour-border);
  border-radius: $border-radius-sm;
  font-size: $font-size-xs;
  font-weight: $font-weight-semibold;
  text-transform: uppercase;
  letter-spacing: 0.05em;

  &[lang="nl"],
  &--nl {
    border-left: $border-width-thick solid $colour-palimpsest-primary;
  }

  &[lang="en"],
  &--en {
    border-left: $border-width-thick solid $colour-palimpsest-accent;
  }
}

// ============================================================================
// AI Training Badge
// ============================================================================

.badge-ai-training {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-sm $spacing-md;
  border-radius: $border-radius-md;
  font-size: $font-size-sm;
  font-weight: $font-weight-semibold;

  // AI training allowed
  &--allowed {
    background-color: colour-opacity($colour-success, 0.1);
    color: $colour-success;
    border: $border-width-medium solid $colour-success;

    &::before {
      content: "✓";
    }
  }

  // AI training restricted (requires consent)
  &--restricted {
    background-color: colour-opacity($colour-warning, 0.1);
    color: darken-colour($colour-warning, 40%);
    border: $border-width-medium solid $colour-warning;

    &::before {
      content: "⚠";
    }
  }

  // AI training prohibited
  &--prohibited {
    background-color: colour-opacity($colour-error, 0.1);
    color: $colour-error;
    border: $border-width-medium solid $colour-error;

    &::before {
      content: "✗";
    }
  }
}

// ============================================================================
// DAO Governance Badge
// ============================================================================

.badge-dao {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-sm $spacing-md;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: #ffffff;
  border-radius: $border-radius-md;
  font-size: $font-size-sm;
  font-weight: $font-weight-semibold;
  border: none;

  &::before {
    content: "◈";
    font-size: 1.2em;
  }
}

// ============================================================================
// Quantum-Proof Badge
// ============================================================================

.badge-quantum-proof {
  display: inline-flex;
  align-items: center;
  gap: $spacing-xs;
  padding: $spacing-sm $spacing-md;
  background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
  color: #ffffff;
  border-radius: $border-radius-md;
  font-size: $font-size-sm;
  font-weight: $font-weight-semibold;
  border: none;

  &::before {
    content: "⚛";
    font-size: 1.2em;
  }
}

// ============================================================================
// Badge Group
// ============================================================================

.badge-group {
  display: inline-flex;
  flex-wrap: wrap;
  gap: $spacing-xs;
  align-items: center;
}

// ============================================================================
// Interactive Badges (hoverable)
// ============================================================================

.badge--interactive {
  cursor: pointer;
  transition: transform $transition-speed-fast, box-shadow $transition-speed-fast;

  &:hover,
  &:focus {
    transform: translateY(-1px);
    box-shadow: $shadow-md;
  }

  @include focus-visible;
}

// ============================================================================
// Pulsing Badge (for notifications)
// ============================================================================

.badge--pulse {
  position: relative;

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: inherit;
    animation: badge-pulse 2s infinite;
  }
}

@keyframes badge-pulse {
  0% {
    box-shadow: 0 0 0 0 currentColor;
    opacity: 0.7;
  }
  70% {
    box-shadow: 0 0 0 10px currentColor;
    opacity: 0;
  }
  100% {
    box-shadow: 0 0 0 0 currentColor;
    opacity: 0;
  }
}

// ============================================================================
// Badge with Tooltip
// ============================================================================

.badge--tooltip {
  position: relative;
  cursor: help;

  &::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%) translateY(-8px);
    padding: $spacing-xs $spacing-sm;
    background-color: var(--colour-text);
    color: var(--colour-background);
    font-size: $font-size-xs;
    font-weight: $font-weight-normal;
    white-space: nowrap;
    border-radius: $border-radius-sm;
    opacity: 0;
    pointer-events: none;
    transition: opacity $transition-speed-normal;
    z-index: $z-index-tooltip;
  }

  &:hover::after,
  &:focus::after {
    opacity: 1;
  }
}

// ============================================================================
// Accessibility Enhancements
// ============================================================================

// Ensure badges are readable with sufficient contrast
@media (prefers-contrast: more) {
  .badge {
    border-width: $border-width-medium;
  }

  .badge--success,
  .badge--error,
  .badge--warning,
  .badge--info,
  .badge--accent {
    font-weight: $font-weight-bold;
  }
}

// Remove animations for reduced motion preference
@include reduced-motion {
  .badge--pulse::after {
    animation: none;
  }

  .badge--interactive {
    transition: none;

    &:hover,
    &:focus {
      transform: none;
    }
  }
}

// Print styles
@include print-styles {
  .badge {
    border: $border-width-thin solid #000 !important;
    background-color: transparent !important;
    color: #000 !important;
  }

  .badge--pulse::after {
    display: none;
  }
}
